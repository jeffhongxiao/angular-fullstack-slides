<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }

    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Scaffold a Fullstack Webapp in Yeoman

### Hong Xiao
### 2017.2

---

## Agenda

1. Introduction
1. Tools used
1. Framework/Library used
1. Generate the project (demo)
1. Get around in the project (demo)
1. Further reading

---
## Introduction

### Scaffolding?
* a technique supported by MVC frameworks
* framework uses pre-defined code templates
* generate the final CRUD code, treating the templates as a "scaffold" (aka *boilerplate*)

<img src="images/scaffolding.jpg" width="200">

---
## Introduction

### Fullstack?

#### MEAN = MongoDB, Express, AngularJS, NodeJS

![MEAN stack](./images/mean.jpg)

---
## Introduction

### Yeoman?

* [Yeoman](http://yeoman.io/learning/index.html): **the web's scaffolding tool for modern webapps**

* Yeoman is a command-line tool for frontend (*and backend*) web development:
  * project scaffolding
  * a build process based in part on Grunt.js (*or gulp*)
  * package management for updating project dependencies

```bash
$ npm install -g yo

# help
$ yo --help

# list local generators and options
$ yo --generators

# diagnosis
$ yo doctor
```

---
## Introduction

### Yeoman generators


* Yeoman can generate projects in many language (Web, Java, Python, C# ...)
* Generators are basically plugins in the Yeoman environment
* [list of generators](http://yeoman.io/generators/)
* create your own generator ([my generator](https://www.npmjs.com/package/generator-angular-fullstack-grunt))

#### [generator-angular-fullstack](https://www.npmjs.com/package/generator-angular-fullstack): 
* Yeoman generator for creating MEAN stack applications, using MongoDB, Express, AngularJS, and Node


---

## Tools used

### package manager

#### [npm](npmjs.org)
```bash
$ npm help

$ npm install -h
$ npm help install
```

#### [bower](https://bower.io/)
```bash
$ bower

$ bower help install
```

---

## Tools used

### automation (serve, test, etc.)
#### [Grunt](http://gruntjs.com/)
```bash
$ grunt serve

# karma:unit
$ grunt test:client

# mochaTest: unit
# mochaTest: integration
$ grunt test:server

# test:client, test:server
$ grunt test

# protractor:chrome
$ grunt test:e2e

```

---
## Framework/Library used

### [AngularJS](https://angularjs.org/) ([v2](https://angular.io/))

* a complete JavaScript-based open-source **front-end web application framework**
* mainly maintained by Google and a community
* address many of the challenges encountered in developing single-page applications (SPA) 

<img src="images/angularjs-logo.png" width="200">

---
## Framework/Library used

### [NodeJS](https://nodejs.org/en/)
* a **JavaScript runtime** built on Chrome's V8 JavaScript engine 
* uses an event-driven, non-blocking I/O model

<img src="images/nodejs-logo.png" width="200">

* npm is the *largest* ecosystem of open source libraries in the world
 * [Atwood's Law, 2007](https://blog.codinghorror.com/the-principle-of-least-power/): 
any application that *can* be written in JavaScript, *will* eventually be written in JavaScript.

* **package.json** file
 * sample [packages.json](https://github.com/angular-fullstack/generator-angular-fullstack/blob/master/package.json)
---
## Framework/Library used

### [Express](http://expressjs.com/)
* a minimal and flexible Node.js *web application framework*
* provides a robust set of features for web and mobile applications

<img src="images/express-logo.png" width="200">

```javascript
var express = require('express')
var app = express()

app.get('/', function (req, res) {
  res.send('Hello World!')
})

app.listen(3000, function () {
  console.log('Example app listening on port 3000!')
})
```

```bash
$ node app.js
```

---
## Framework/Library used

### [MongoDB](https://www.mongodb.com/)
* **NoSQL** database
* free and open-source 
* cross-platform 
* document-oriented

<img src="images/mongodb-logo.jpg" width="200">

---
## Framework/Library used

### testing
#### unit test, integration test
 
* [Chai](http://chaijs.com/): BDD / TDD assertion library for node and the browser
 * [Should](https://github.com/shouldjs/should.js): BDD style **assertions** for node.js

```javascript
  it('should attach a list of things to the scope', function() {
    $httpBackend.flush();
    scope.awesomeThings.length.should.equal(4);
  });

```

---
## Framework/Library used

### testing
* [Sinon](http://sinonjs.org/): standalone test *spies*, *stubs* and *mocks* for JavaScript


```javascript
var routerStub = {
  get: sinon.spy(),
  // other methods
};

...

  describe('GET /api/users', function() {
    it('should verify admin role and route to user.controller.index', function() {
      routerStub.get
                .withArgs('/', 'authService.hasRole.admin', 'userCtrl.index')     // Sinon
                .should.have.been.calledOnce;
    });
  });

```


---
## Framework/Library used

### testing
* [Supertest](https://www.npmjs.com/package/supertest): provide a high-level abstraction for testing HTTP, while still allowing the lower-level API provided by [superagent](https://www.npmjs.com/package/superagent)

```javascript
var request = require('supertest');

...

    it('should respond with a 401 when not authenticated', function(done) {
      request(app)
        .get('/api/users/me')
        .expect(401)
        .end(done);
    });
```

---
## Framework/Library used

### testing

#### unit test, integration test
* [Mocha](https://mochajs.org/): test framework running on Node.js and in the browser


#### end-to-end (e2e) test:
* [Protractor](http://www.protractortest.org/#/): end-to-end test framework for AngularJS applications, in a *real browser* (with Selenium)


---
## Generate the project (demo)

### use an older version of node in nvm
     (generator-angular-fullstack@3.0.0-rc4 uses an older version of Node)
```bash
$ nvm ls
$ nvm use v0.12.7

$ npm install -g generator-angular-fullstack@3.0.0-rc4
```

### generate a webapp: *meaningful-app*
```bash
$ yo angular-fullstack meaningful-app
(... answer a few questions; see next slide ...)
```	
---

* Client
  * script: Javascript
  * markup: HTML
  * stylesheet: Sass
  * angular router: uiRouter
  * bootstrap: Yes
  * UI boostrap: Yes

* Server
  * data modeling: Mongoose (MongoDB)
  * authenticate boilerplate: Yes
  * oAuth: Google, Facebook, Twitter
  * socket.io: Yes
  
* Project
  * tests with: Mocha + Chai + Sinon
  * Chai assertion: Should


~~~
I'm all done. Running npm install & bower install
for you to install the required dependencies. 
If this fails, try running the command yourself.
~~~

---

## Get around in the project (demo)

---

## Further reading

### websites

* [yeoman.io](http://yeoman.io)
* [npmjs](https://www.npmjs.com/)
* [nvm: Node Version Manager](https://github.com/creationix/nvm)

* [mean.io](http://mean.io/)

### books
* [Web Application Development with MEAN](https://www.packtpub.com/application-development/web-application-development-mean)
  * [Building an E-Commerce Application with MEAN](https://www.packtpub.com/web-development/building-e-commerce-application-mean)

* [JavaScript: The Good Parts](https://www.safaribooksonline.com/library/view/javascript-the-good/9780596517748/)
---

## Further reading

### courses
* [M101JS: MongoDB for Node.js Developers](https://university.mongodb.com/courses/M101JS/about)
* [Shaping up with Angular.js](https://www.codeschool.com/courses/shaping-up-with-angular-js)

* [PluralSight](http://www.pluralsight.com)
---

## Questions?

### github: [jeffhongxiao](https://github.com/jeffhongxiao)

<img src="images/jeffxiao.jpg" width="200">

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
